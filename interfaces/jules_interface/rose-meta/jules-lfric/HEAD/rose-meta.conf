# Please see jules:wiki:SharingJULESmetadata

import=lfric-jules-shared/jules-nvegparm/HEAD
      =lfric-jules-shared/jules-radiation/HEAD
      =lfric-jules-shared/jules-snow/HEAD
      =lfric-jules-shared/jules-surface/HEAD
      =lfric-jules-shared/jules-surface-types/HEAD
      =lfric-jules-shared/jules-urban/HEAD
      =lfric-jules-shared/jules-vegetation/HEAD

[namelist:ideal_surface]
compulsory=true
description=Idealised surface settings
ns=namelist/Job/Initial conditions/Surface
sort-key=Section-A05
title=Surface

[namelist:ideal_surface=canopy_height]
compulsory=true
description=Canopy height of each plant type
fail-if=len(this) != namelist:jules_surface_types=npft
help=Canopy height of each plant type
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-03
type=real

[namelist:ideal_surface=leaf_area_index]
compulsory=true
description=Leaf area index of each plant type
fail-if=len(this) != namelist:jules_surface_types=npft
help=Leaf area index of each plant type
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-04
type=real

[namelist:ideal_surface=n_snow_layers]
compulsory=true
description=Snow layers on each tile
fail-if=len(this) != namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg + namelist:jules_sea_seaice=nice + 1
help=The initial number of snow layers on each surface tile
    =
    =The order of tiles is land, sea, sea-ice
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-08
type=integer

[namelist:ideal_surface=snow_depth]
compulsory=true
description=Snow depth on each tile
fail-if=len(this) != namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg + namelist:jules_sea_seaice=nice + 1
help=The initial snow depth on each surface tile
    =
    =The order of tiles is land, sea, sea-ice
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-09
type=real

[namelist:ideal_surface=snow_layer_ice_mass]
compulsory=true
description=Ice mass of each snow layer on tiles
fail-if=len(this) != 3*(namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg)
help=The initial ice mass of each snow layer
    =
    =The order in tiles 1-n for layer 1, then tiles 1-n for layer 2 etc
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-11
type=real

[namelist:ideal_surface=snow_layer_temp]
compulsory=true
description=Temperature of each snow layer on tiles
fail-if=len(this) != 3*(namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg)
help=The initial temperature of each snow layer
    =
    =The order in tiles 1-n for layer 1, then tiles 1-n for layer 2 etc
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-12
type=real

[namelist:ideal_surface=snow_layer_thickness]
compulsory=true
description=Thickness of each snow layer on tiles
fail-if=len(this) != 3*(namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg)
help=The initial thickness of each snow layer
    =
    =The order in tiles 1-n for layer 1, then tiles 1-n for layer 2 etc
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-10
type=real

[namelist:ideal_surface=soil_moisture]
compulsory=true
description=Soil moisture content
help=Soil moisture content on soil levels
!kind=default
length=4
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-05
type=real

[namelist:ideal_surface=soil_temperature]
compulsory=true
description=Soil temperature
help=Temperature of soil levels
!kind=default
length=4
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-06
type=real

[namelist:ideal_surface=surf_tile_fracs]
compulsory=true
description=Fraction of each surface tile
fail-if=len(this) != namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg + namelist:jules_sea_seaice=nice + 1
help=The fraction within a grid-box of each surface tile
    =
    =The order of tiles is land, sea, sea-ice
    =
    =The fractions should sum to 1
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-01
type=real

[namelist:ideal_surface=surf_tile_temps]
compulsory=true
description=Fraction of each surface tile
fail-if=len(this) != namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg + namelist:jules_sea_seaice=nice + 1
help=The initial temperature of each surface tile
    =
    =The order of tiles is land, sea, sea-ice
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-02
type=real

[namelist:ideal_surface=tile_snow_mass]
compulsory=true
description=Snow mass on each tile
fail-if=len(this) != namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg + namelist:jules_sea_seaice=nice + 1
help=The initial snow mass on each surface tile
    =
    =The order of tiles is land, sea, sea-ice
!kind=default
length=:
ns=namelist/Job/Initial conditions/Surface
sort-key=Panel-07
type=real

[namelist:jules_hydrology]
compulsory=true
ns=namelist/Science/JULES Surface/Hydrology
sort-key=Panel-A02
url=http://jules-lsm.github.io/latest/namelists/jules_hydrology.nml.html#namelist-JULES_HYDROLOGY

[namelist:jules_hydrology=l_hydrology]
compulsory=true
description=Enable soil hydrology
help=The Jules hydrology scheme represents surface runoff,
    = groundwater infiltration and soil evolution.
    =
    =This switch also enables evolution of the surface snowpack.
!kind=default
ns=namelist/Science/JULES Surface/Hydrology
sort-key=Panel-A01
type=logical

[namelist:jules_hydrology=l_var_rainfrac]
compulsory=true
description=Enable variable large scale and convective rain fractions
!kind=default
ns=namelist/Science/JULES Surface/Hydrology
sort-key=Panel-A02
type=logical

[namelist:jules_pftparm]
compulsory=true
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H01
url=http://jules-lsm.github.io/latest/namelists/pft_params.nml.html#namelist-JULES_PFTPARM

[namelist:jules_pftparm=albsnc_max_io]
description=Snow-covered albedo for large LAI
help=Only used when namelist:jules_radiation=l_snow_albedo is false
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
range=0:1
sort-key=Panel-H03
type=real

[namelist:jules_pftparm=alnir_io]
description=NIR Leaf reflection coeff
help=Leaf reflection coefficient for Near Infra Red wavelengths > 690nm.
    =Used unless can_rad_mod=1 AND l_spec_albedo is false.
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
range=0:1
sort-key=Panel-H01
type=real

[namelist:jules_pftparm=alpar_io]
description=VIS Leaf reflection coeff
help=Leaf reflection coefficient for wavelengths < 690nm (Photosyntehtically Active Radiation).
    =Used unless can_rad_mod=1 AND l_spec_albedo is false.
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
range=0:1
sort-key=Panel-H02
type=real

[namelist:jules_pftparm=catch0_io]
description=Minimum canopy capacity (kg m-2)
fail-if=len(this) != namelist:jules_surface_types=npft
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H10
type=real
url=http://jules-lsm.github.io/latest/namelists/pft_params.nml.html#JULES_PFTPARM::catch0_io

[namelist:jules_pftparm=dcatch_dlai_io]
description=Rate of change of canopy capacity with LAI (kg m-2)
fail-if=len(this) != namelist:jules_surface_types=npft
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H11
type=real
url=http://jules-lsm.github.io/latest/namelists/pft_params.nml.html#JULES_PFTPARM::dcatch_dlai_io

[namelist:jules_pftparm=fsmc_p0_io]
compulsory=true
description=Pft-dependent parameter governing the threshold at which the plant starts to experience water stress due to lack of water in the soil
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H04
type=real

[namelist:jules_pftparm=kext_io]
description=Light extinction coefficient
help=Used with Beers Law for light absorption through tile canopies
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H05
type=real

[namelist:jules_pftparm=knl_io]
description=Decay of nitrogen through the canopy for canopy radiation model 6
help=Used only if namelist:jules_vegetation=can_rad_mod is 6.
    =SHOULD NOT BE THE SAME AS KN!
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H05
type=real
url=http://jules-lsm.github.io/latest/namelists/pft_params.nml.html#JULES_PFTPARM::knl_io

[namelist:jules_pftparm=omega_io]
description=VIS Leaf scattering coeff
help=Leaf scattering coefficient for wavelengths < 690nm (Photosyntehtically Active Radiation).
    =Used unless can_rad_mod=1 AND l_spec_albedo is false.
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
range=0:1
sort-key=Panel-H07
type=real

[namelist:jules_pftparm=omnir_io]
description=NIR Leaf scattering coeff
help=Leaf scattering coefficient for Near Infra Red wavelengths > 690nm.
    =Used unless can_rad_mod=1 AND l_spec_albedo is false.
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
range=0:1
sort-key=Panel-H06
type=real

[namelist:jules_pftparm=z0hm_pft_io]
compulsory=true
description=Ratio of the roughness length for heat to the roughness length for momentum for vegetation
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H08
type=real

[namelist:jules_pftparm=z0v_io]
description=Roughness length for momentum for vegetation if l_spec_veg_z0=true
!kind=default
length=:
ns=namelist/Science/JULES Surface/pft Params
sort-key=Panel-H09
type=real

[namelist:jules_radiation=fixed_sea_albedo]
description=If using i_sea_alb_method='fixed', the global value of albedo to use.

[namelist:jules_radiation=i_sea_alb_method]
compulsory=true
description=Choice of model for the Ocean Surface Albedo (open water,
           =ice free)
!enumeration=true
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-B05
trigger=namelist:jules_radiation=l_sea_alb_var_chl: 'jin';
       =namelist:jules_radiation=fixed_sea_albedo: 'fixed';
url=http://jules-lsm.github.io/latest/namelists/jules_radiation.nml.html#JULES_RADIATION::i_sea_alb_method
value-titles=Barker and Li 1995,Jin et al. 2011,Fixed global value
values='barker','jin','fixed'

[namelist:jules_radiation=l_albedo_obs]
compulsory=true
description=Scale albedos of land-surface tiles to agree with obs
!kind=default
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-B01
trigger=namelist:files=albedo_vis_ancil_path: .true. ;
       =namelist:files=albedo_nir_ancil_path: .true. ;
       =namelist:jules_nvegparm=albsnf_nvgu_io: .true.;
       =namelist:jules_nvegparm=albsnf_nvgl_io: .true.;
type=logical
url=http://jules-lsm.github.io/latest/namelists/jules_radiation.nml.html#JULES_RADIATION::l_albedo_obs

[namelist:jules_radiation=l_niso_direct]
compulsory=true
description=Use the full non-isotropic expression for direct scattering in plant canopies
!kind=default
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-B02a1
type=logical
url=http://jules-lsm.github.io/latest/namelists/jules_radiation.nml.html#JULES_RADIATION::l_niso_direct

[namelist:jules_radiation=l_sea_alb_var_chl]
compulsory=true
description=Use spatially varying chlorophyll content to calculate the open sea albedos
           =NOT AVAILABLE TO STANDALONE
help=The Jin et al. parameterisation of open sea albedo includes chlorophyll content. This can either be:
    =FALSE: Held constant at 0.5 mg m-3,
    =or,
    =TRUE: Input as an ancillary field.
!kind=default
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-B05b
trigger=namelist:files=sea_ancil_path: .true. ;
type=logical

[namelist:jules_radiation=l_spec_alb_bs]
compulsory=true
description=Use a single value for both the direct and diffuse beams
!kind=default
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-B02a
trigger=namelist:jules_radiation=l_niso_direct: .false.;
type=logical
url=http://jules-lsm.github.io/latest/namelists/jules_radiation.nml.html#JULES_RADIATION::l_spec_alb_bs

[namelist:jules_sea_seaice]
compulsory=true
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C01
title=Sea and sea-ice options

[namelist:jules_sea_seaice=alpham]
compulsory=true
description=Original HadGEM sea ice albedo scheme: Albedo of sea-ice at
           =melting point (TM, if .not.l_ssice_albedo),
           =or albedo of snow on sea-ice at melting point (TM, if
           =l_ssice_albedo) ("M" for "melting")
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0:1
sort-key=Panel-C01
type=real

[namelist:jules_sea_seaice=beta_evap]
compulsory=true
description=Efficiency of evaporation from sea-surface
help=This parameter controls the efficiency with which water can evaporate from a sea-surface.
    = The default value is 1.0, moisture availability is effectively unrestricted.
    = However, lower values can be useful for idealised modelling,
    = restricting the evaporation rate.
    = For example, a value of 0.0 would result in no evaporation.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0.0:1.0
sort-key=Panel-C05
type=real

[namelist:jules_sea_seaice=buddy_sea]
compulsory=true
description=Use neighbouring sea point wind-speeds in coastal grid points
!enumeration=true
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C01a
value-titles=Off,On
values='Off','On'

[namelist:jules_sea_seaice=cdn_hw_sea]
compulsory=true
description=Neutral drag coefficient over the sea at high wind speeds.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C06a
type=real

[namelist:jules_sea_seaice=cdn_max_sea]
compulsory=true
description=Maximum value of the neutral drag coefficient over open sea.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C06b
type=real

[namelist:jules_sea_seaice=dtice]
compulsory=true
description=Original HadGEM sea ice albedo scheme: Temperature range in which
           =albedo of sea-ice (if .not.l_ssice_albedo),
           =or of snow on sea-ice (if l_ssice_albedo),
           =varies between its limits (recommended range 5-10K)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0.1:50
sort-key=Panel-C02
type=real

[namelist:jules_sea_seaice=emis_sea]
compulsory=true
description=Emissivity of open sea
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C03
type=real

[namelist:jules_sea_seaice=emis_sice]
compulsory=true
description=Emissivity of sea-ice
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C04
type=real

[namelist:jules_sea_seaice=hcap_sea]
description=Heat capacity of the slab ocean (J K-1 m-2)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0.0:
sort-key=Panel-C14a
type=real

[namelist:jules_sea_seaice=i_high_wind_drag]
compulsory=true
description=Option to impose a special treatment of drag at high wind speeds.
!enumeration=true
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C06
trigger=namelist:jules_sea_seaice=cdn_hw_sea: 'reduced_v1';
       =namelist:jules_sea_seaice=cdn_max_sea: 'limited','reduced_v1';
       =namelist:jules_sea_seaice=u_cdn_hw: 'reduced_v1';
       =namelist:jules_sea_seaice=u_cdn_max: 'reduced_v1';
value-titles=No special treatment of drag at high winds,
            =The drag at high winds is capped,
            =The drag at high winds is reduced over a range of speeds
values='null','limited','reduced_v1'

[namelist:jules_sea_seaice=iseasurfalg]
compulsory=true
description=Algorithm for surface exchange over the sea
!enumeration=true
help=The most basic option for surface transfer at the sea surface
    =consists of a specification of Charnocks coefficient for the
    =momentum roughness length, including the aerodynamically smooth
    =contribution in light winds, and a fixed thermal roughness length.
    =Surface divergence theory allows for a variable thermal roughness
    =length that follows the aerodynamicall smooth limit in light winds
    =and decreases in stronger winds, giving a slower increase in the
    =exchange coefficient for moisture as the wind rises. Historically,
    =roughness lengths that depend on the friction velocity have not
    =been iterated within the calculation of the Obukhov length, though
    =this is more consistent: an iterative option is therefore provided.
    =The COARE algorithm is based on a range of observations and exists
    =in various forms. It features a dependence of Charnocks coefficient
    =on the wind speed and a dependence of the thermal roughness length
    =on the roughness Reynolds number. Extra parameters allow different
    =versions of the algorithm to be used.
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C09
trigger=namelist:surface=z0m_specified: 'specified_roughness';
       =namelist:surface=z0h_specified: 'specified_roughness';
value-titles="Fixed values of roughness length for momentum and heat",
            ="Fixed value of Charnock's coefficient with thermal
            =roughness from surface divergence theory (non-iterative)",
            ="Roughness lengths follow functional forms of the COARE
            =algorithm"
values='specified_roughness','surf_div','coare'

[namelist:jules_sea_seaice=kappa_seasurf]
compulsory=false
description=Thermal conductivity of sea-water (W / m / K)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C11
type=real

[namelist:jules_sea_seaice=kappai]
compulsory=false
description=Thermal conductivity of sea-ice (W / m / K)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C12
type=real

[namelist:jules_sea_seaice=kappai_snow]
compulsory=false
description=Thermal conductivity of snow on zero layer sea-ice (W / m / K)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C13
type=real

[namelist:jules_sea_seaice=l_10m_neut]
compulsory=true
description=Logical for using neutral 10m wind speed to calculate the Charnock coefficient for sea points
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C08
type=logical

[namelist:jules_sea_seaice=l_iceformdrag_lupkes]
compulsory=true
description=Switch for diagnostic form drag following Lupkes et al. (2012)
           =and Lupkes & Gryanik (2015)
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C07
trigger=namelist:jules_sea_seaice=l_stability_lupkes: .true.;
type=logical

[namelist:jules_sea_seaice=l_sice_heatflux]
compulsory=true
description=Do semi-implicit update of ti for sea-ice
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C10
type=logical

[namelist:jules_sea_seaice=l_stability_lupkes]
compulsory=true
description=Switch to include the stability dependence in the parametrization
           =of ice form drag
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C07a
type=logical

[namelist:jules_sea_seaice=l_use_dtstar_sea]
compulsory=true
description=Update the sea-surface temperature assuming a slab ocean with
           = heat capacity given by namelist:jules_sea_seaice=hcap_sea
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C14
trigger=namelist:jules_sea_seaice=hcap_sea: .true.;
type=logical

[namelist:jules_sea_seaice=nice]
compulsory=true
description=Number of sea ice categories
help=The number of sea ice categories. This is normally 1 unless the model is
    = coupled to a sea ice model when this is normally 5. This namelist
    = entry is used to populate the nice variable in
    = jules_control_init_mod.F90. All other subroutines should load
    = nice from jules_control_init_mod and not from the surface
    = namelist.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=1:99
sort-key=Panel-C00a
type=integer

[namelist:jules_sea_seaice=u_cdn_hw]
compulsory=true
description=Neutral wind speed where the drag attains the high wind value.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C06c
type=real

[namelist:jules_sea_seaice=u_cdn_max]
compulsory=true
description=Neutral wind speed where the drag begins to be reduced from the maximum.
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C06d
type=real

[namelist:jules_snow=can_clump]
fail-if=len(this) != namelist:jules_surface_types=npft; # A value must be given for each PFT
       =all(this == 0) and any(namelist:jules_snow=cansnowpft ==  '.true.'); # Results in floating point exception if 0. Only used if can_model = 4 (JULES default), cansnowpft = TRUE on that tile and l_embedded_snow = TRUE (LFRic default).

[namelist:jules_snow=cansnowpft]
compulsory=true
length=5

[namelist:jules_snow=i_basal_melting_opt]
compulsory=true
description=Option for melting at the base of the snow pack
!enumeration=true
ns=namelist/JULES Science Settings/jules_snow/Other parameters
sort-key=Panel-D17
value-titles=No basal melting,Instantaneous basal melting
values='none','instant'

[namelist:jules_snow=i_grain_growth_opt]
compulsory=true
description=Option for rate of growth of snow grains
!enumeration=true
ns=namelist/JULES Science Settings/jules_snow/Other parameters
sort-key=Panel-D04
value-titles=Marshall1989,Taillandier2007_ET
values='marshall','taillandier'

[namelist:jules_snow=i_relayer_opt]
compulsory=true
description=Option for method of relayering the snow pack
!enumeration=true
help=This value is only used if nsmax > 0.
ns=namelist/JULES Science Settings/jules_snow/Other parameters
sort-key=Panel-D01e
value-titles=Original Scheme,Relayer inverse of grain size
values='original','inverse'

[namelist:jules_soil]
compulsory=true
ns=namelist/Science/JULES Surface/Soil
sort-key=Panel-E01
title=Soil options
url=http://jules-lsm.github.io/latest/namelists/jules_soil.nml.html#namelist-JULES_SOIL

[namelist:jules_soil=l_dpsids_dsdz]
compulsory=true
description=Calculate vertical gradient of soil suction with the assumption of linearity only for
           =fractional saturation (consistent with the calculation of hydraulic conductivity)
!kind=default
ns=namelist/Science/JULES Surface/Soil
sort-key=Panel-E01
type=logical

[namelist:jules_soil=l_soil_sat_down]
compulsory=true
description=Direction of water in excess of saturation
help=If a soil layer becomes supersaturated,
    =the water in excess of saturation will be put into the
    =layer above or below according to this switch
    =
    =Down  => Excess is put into the layer below. Excess from the bottom layer becomes subsurface runoff
    =Up    => Excess is put into the layer above. Excess from the top layer becomes surface runoff
!kind=default
ns=namelist/Science/JULES Surface/Soil
sort-key=Panel-E03
type=logical

[namelist:jules_soil=l_vg_soil]
compulsory=true
description=Switch for van Genuchten soil hydraulic model.
!kind=default
ns=namelist/Science/JULES Surface/Soil
sort-key=Panel-E02
type=logical

[namelist:jules_surface=check_soilm_negatives]
description=Switch to check if soil moisture has become negative as part of the lake water conservation scheme
type=logical

[namelist:jules_surface=cor_mo_iter]
value-titles=Limit Obukhov length in low winds,
            =Improve initial guess (preferred)
values='lim_oblen','improved'

[namelist:jules_surface=fd_stability_dep]
value-titles=Off,Surface Ri
values='none','surf_ri'

[namelist:jules_surface=formdrag]
trigger=namelist:jules_surface=fd_stability_dep: 'eff_z0','dist_drag';
values='none','eff_z0','dist_drag'

[namelist:jules_surface=l_urban2t]
trigger=namelist:jules_surface_types=urban_canyon: .true.;
       =namelist:jules_surface_types=urban_roof: .true.;
       =namelist:jules_surface_types=urban: .false.;
       =namelist:jules_urban: .true.;
       =namelist:jules_urban=anthrop_heat_scale: .true.;
       =namelist:files=urban_ancil_path: .true.;

[namelist:jules_surface=l_vary_z0m_soil]
trigger=namelist:files=soil_rough_ancil_path: .true. ;

[namelist:jules_surface=lake_water_conservation]
compulsory=true
description=Use the lake water conservation scheme
help=The inland water tile (aka lake tile) is a freely evaporating surface that does not deplete the local water supply. In order to conserve water the lake water conservation scheme decreases the level 4 soil moisture globally to account for this.
trigger=namelist:jules_surface=check_soilm_negatives: .true.;
type=logical

[namelist:jules_surface=srf_ex_cnv_gust]
type=logical

[namelist:jules_surface_types=urban]
fail-if=this > (namelist:jules_surface_types=npft + namelist:jules_surface_types=nnvg); # Pseudo level must be less than or equal to npft+nnvg
       =this <= namelist:jules_surface_types=npft; # PFTs must be grouped together first with non-vegetated tiles following

[namelist:jules_vegetation=can_rad_mod]
values='one','four','five','six'

[namelist:jules_vegetation=l_spec_veg_z0]
trigger=namelist:jules_pftparm=z0v_io: .true.;

[namelist:specified_surface]
compulsory=true
description=Further Idealised surface settings
ns=namelist/Science/Specified Surface
sort-key=Section-A05
title=Surface

[namelist:specified_surface=function_amplitude_e]
compulsory=true
description=Amplitude of the function used for surface latent heat flux
help=Specifies the amplitude of the analytical function used for calculating the
    =surface latent heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=function_amplitude_h]
compulsory=true
description=Amplitude of the function used for surface sensible heat flux
help=Specifies the amplitude of the analytical function used for calculating the
    =surface sensible heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=function_name_fluxes]
compulsory=true
description=Name of the function used for surface latent and sensible heat fluxes
!enumeration=true
help=Specifies function name used for calculating surface latent and sensible heat fluxes
    =If constant, uses the single values set in specified_flux_h and specified_flux_e. profile_size should be set to 1.
    =If time-interpolated, uses the time-varying arrays set in specified_flux_h and specified_flux_e, where the arrays are of length profile_size.
    =If sinusoidal, fluxes are set to
    =amplitude * sin( 2 * pi * current_time / period + phase )
    =If diurnal, fluxes are set to
    =max(0, amplitude * cos( pi* (time_of_max_flux - current_time) / length_of_day )^1.3 )
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
trigger=namelist:specified_surface=function_amplitude_e: 'sinusoidal', 'diurnal';
       =namelist:specified_surface=function_period_e: 'sinusoidal';
       =namelist:specified_surface=function_phase_e: 'sinusoidal';
       =namelist:specified_surface=function_amplitude_h: 'sinusoidal', 'diurnal';
       =namelist:specified_surface=function_period_h: 'sinusoidal';
       =namelist:specified_surface=function_phase_h: 'sinusoidal';
       =namelist:specified_surface=length_of_day: 'diurnal';
       =namelist:specified_surface=time_of_max_flux: 'diurnal';
       =namelist:specified_surface=length_of_day: 'diurnal';
       =namelist:specified_surface=time_data: 'time_interpolated';
       =namelist:specified_surface=profile_size: 'constant','time_interpolated';
       =namelist:specified_surface=specified_flux_e: 'constant','time_interpolated';
       =namelist:specified_surface=specified_flux_h: 'constant','time_interpolated';
       =namelist:specified_surface=time_units: 'sinusoidal', 'diurnal', 'time_interpolated';
value-titles=Constant, Time Interpolated, Sinusoidal function, Diurnal function
values='constant', 'time_interpolated', 'sinusoidal', 'diurnal'

[namelist:specified_surface=function_name_sst]
compulsory=true
description=Name of the function used for sea surface temperatures
!enumeration=true
help=Specifies the function name used for calculating surface sensible heat flux
    = If constant, uses the sea surface tile value set by surf_tile_temps option found in
    = ideal_surface namelist.
    = If time_interpolated, uses the time-varying array set in sea_surf_temps found in the
    = specified_surface namelist.
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
trigger=namelist:specified_surface=time_data_sst: 'time_interpolated';
       =namelist:specified_surface=profile_size_sst: 'time_interpolated';
       =namelist:specified_surface=time_units_sst: 'time_interpolated';
       =namelist:specified_surface=sea_surf_temps: 'time_interpolated';
value-titles=Constant, Time Interpolated
values='constant', 'time_interpolated'

[namelist:specified_surface=function_period_e]
compulsory=true
description=Period of the function used for surface latent heat flux
help=Specifies the period of the sinusoidal analytical function used for calculating
    =latent heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=function_period_h]
compulsory=true
description=Period of the function used for surface sensible heat flux
help=Specifies the period of the sinusoidal analytical function used for calculating
    =sensible heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=function_phase_e]
compulsory=true
description=Phase of the function used for latent heat flux
help=Specifies the phase of the sinusoidal analytical function used for calculating the
    =latent heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=function_phase_h]
compulsory=true
description=Phase of the function used for sensible heat flux
help=Specifies the phase of the sinusoidal analytical function used for calculating the
    =sensible heat flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=internal_flux_method]
compulsory=true
description=How to prescribe the internal flux
!enumeration=true
help=Either a constant value or a 2D map
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
trigger=namelist:files=internal_flux_ancil_path: 'non_uniform' ;
       =namelist:specified_surface=internal_flux_value: 'uniform' ;
value-titles=Uniform, Non-Uniform
values='uniform','non_uniform'

[namelist:specified_surface=internal_flux_value]
compulsory=true
description=Constant internal flux value
help=Use the Stefan-Boltzmann law to calculate the flux from
    =internal temperature T_int
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=length_of_day]
compulsory=true
description=Duration of daylight
help=Specifies the duration of daylight, in units that are consistent with
    =the length_of_day option, used for the diurnal analytical function.
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=profile_size]
compulsory=true
description=Number of points in varying flux profile
help=Number of data points in the specified_flux_h and specified_flux_e
    =arrays
!kind=default
ns=namelist/Science/Specified Surface
range=0:
sort-key=Panel-A03e
type=integer

[namelist:specified_surface=profile_size_sst]
compulsory=true
description=Number of points in sst profile
help=Number of data points in the sea_surf_temps arrays
!kind=default
ns=namelist/Science/Specified Surface
range=0:
sort-key=Panel-A03e
type=integer

[namelist:specified_surface=sea_surf_temps]
!bounds=namelist:specified_surface=profile_size_sst
compulsory=true
description=Time-varying sea surface temperature profile
help=Sea surface temperature values (K) used at times specified, overides
    =the sea surface tile value set by surf_tile_temps option found in
    =ideal_surface namelist.
!kind=default
length=:
ns=namelist/Science/Specified Surface
sort-key=Panel-A03d
type=real

[namelist:specified_surface=specified_flux_e]
!bounds=namelist:specified_surface=profile_size
compulsory=true
description=Surface latent heat flux [Wm-2]
help=Fixed or time-varying value used throughout the run.
!kind=default
length=:
ns=namelist/Science/Specified Surface
sort-key=Panel-A01a
type=real

[namelist:specified_surface=specified_flux_h]
!bounds=namelist:specified_surface=profile_size
compulsory=true
description=Surface sensible heat flux [Wm-2]
help=Fixed or time-varying value used throughout the run
!kind=default
length=:
ns=namelist/Science/Specified Surface
sort-key=Panel-A01b
type=real

[namelist:specified_surface=surf_temp_forcing]
compulsory=true
description=Forcing of the surface temperature
!enumeration=true
help=E.g. increment due to an internal flux
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
trigger=namelist:specified_surface=internal_flux_method: 'int_flux' ;
value-titles=None, Internal flux
values='none','int_flux'

[namelist:specified_surface=time_data]
!bounds=namelist:specified_surface=profile_size
compulsory=true
description=Time values
help=Time values corresponding with the time-varying fluxes
!kind=default
length=:
ns=namelist/Science/Specified Surface
range=0.0:
sort-key=Panel-A03c
type=real

[namelist:specified_surface=time_data_sst]
!bounds=namelist:specified_surface=profile_size_sst
compulsory=true
description=Time values
help=Time values corresponding with the time-varying ssts
!kind=default
length=:
ns=namelist/Science/Specified Surface
range=0.0:
sort-key=Panel-A03c
type=real

[namelist:specified_surface=time_of_max_flux]
compulsory=true
description=Time of maximum flux
help=Specifies the time of day when the flux reaches its maximum value.
    =The units must be consistent with the units used by the length_of_day option.
    =Used for the diurnal analytical function.
!kind=default
ns=namelist/Science/Specified Surface
sort-key=Panel-A03
type=real

[namelist:specified_surface=time_units]
compulsory=true
description=Units of the time_data list/ function_period
!enumeration=true
help=Specifies the units of the time data/ wave period used.
ns=namelist/Science/Specified Surface
value-titles=Seconds,Minutes,Hours,Days
values='seconds','minutes','hours','days'

[namelist:specified_surface=time_units_sst]
compulsory=true
description=Units of the time_data list/ function_period
!enumeration=true
help=Specifies the units of the time data/ wave period used.
ns=namelist/Science/Specified Surface
value-titles=Seconds,Minutes,Hours,Days
values='seconds','minutes','hours','days'

[namelist:surface]
compulsory=true
description=Surface parametrisations
ns=namelist/Science/JULES Surface
sort-key=Section-A12
title=Surface

[namelist:surface=amip_ice_thick]
compulsory=true
description=Calculate ice thickness from ice fraction
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
sort-key=Panel-C01
type=logical

[namelist:surface=emis_method_sea]
compulsory=true
description=Emissivity method for open sea
           = Two options for spectrally varying emissivity in addition to a fixed emissivity:
           = D. Feldman et al. (2014) https://doi.org/10.1073/pnas.1413640111 and
           = R. Saunders et al. (2018) https://doi.org/10.5194/gmd-11-2717-2018 for IREMIS.
!enumeration=true
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-C02a
value-titles=1: Fixed,
            =2: Feldman,
            =3: IREMIS
values='fixed','feldman','iremis'

[namelist:surface=emis_method_soil]
compulsory=true
description=Emissivity method for soil
           = Option for spectrally varying emissivity in addition to a fixed emissivity:
           = D. Feldman et al. (2014) https://doi.org/10.1073/pnas.1413640111
!enumeration=true
ns=namelist/JULES Science Settings/jules_radiation
sort-key=Panel-G06
value-titles=1: Fixed,
            =2: Feldman Desert
values='fixed','feldman_desert'

[namelist:surface=z0h_specified]
compulsory=true
description=Specified roughness length for scalars [m]
fail-if=this < 0
help=Specified value held fixed throughout the run used for surface exchange
    =of scalar fields such as heat and moisture
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0.0:100.0
sort-key=Panel-C09b
type=real

[namelist:surface=z0m_specified]
compulsory=true
description=Specified roughness length for momentum [m]
fail-if=this < 0
help=Specified value held fixed throughout the run
!kind=default
ns=namelist/Science/JULES Surface/Sea and sea-ice
range=0.0:100.0
sort-key=Panel-C09a
type=real

# Dummy page to force sort order for Snow other parameters
[namespace:snow_other]
ns=namelist/JULES Science Settings/jules_snow/Other parameters
sort-key=02

# Dummy page to force sort order for Snow radiation parameters
[namespace:snow_radiation]
ns=namelist/JULES Science Settings/jules_snow/Radiation parameters
sort-key=01
